![[Pasted image 20241018203837.png]]

**청킹**(**Chunking**)은 긴 텍스트 데이터를 더 **작은 단위로 나누는 과정을 의미**합니다. 특히 대형 언어 모델(LLM)에서 긴 텍스트를 효과적으로 처리하기 위해서는 청킹이 필수적입니다. 이 과정에서 텍스트를 **청크**(**Chunk**) 단위로 나누면 모델이 제한된 크기의 입력 데이터만을 처리할 수 있는 상황에서도 문맥을 유지할 수 있습니다. 또한, 청킹은 **처리 시간 단축**과 **모델 효율성**을 높이는 데 기여합니다.

---

### 청킹의 필요성

#### 1. 입력 데이터의 크기 제한
대형 언어 모델은 일반적으로 **입력 데이터의 크기**에 제한이 있습니다. 텍스트가 너무 길면 모델이 한 번에 처리할 수 없으므로 이를 적절히 나누어 **작은 청크**로 변환해야 합니다.

#### 2. 처리 시간 단축
텍스트를 나누어 처리하면 한 번에 처리하는 양이 줄어들어 **처리 시간이 단축**되고, 결과적으로 모델이 더 빠르게 동작할 수 있습니다.

---

### 청킹의 주요 개념: Chunk Size와 Chunk Overlap
![[Pasted image 20241018205047.png]]
Recursive
청킹을 할 때 중요한 두 가지 개념은 **청크 사이즈(Chunk Size)**와 **청크 오버랩(Chunk Overlap)**입니다.
![[Pasted image 20241019171300.png]]
![[Pasted image 20241019171335.png]]
- **Chunk Size**: 한 번에 처리할 텍스트의 **크기**를 의미합니다. 텍스트의 길이를 기준으로 청크의 크기를 결정합니다. 너무 작은 크기로 나누면 문맥이 손실될 수 있고, 너무 크면 처리에 어려움이 생길 수 있습니다.
  
- **Chunk Overlap**: **청크 사이**의 **겹치는 부분**을 의미합니다. 청크 간에 **일부 문장이 겹치도록** 설정하여 문맥이 자연스럽게 이어지도록 만들 수 있습니다.

---

### 청킹의 유형

#### 1. CharacterTextSplitter
가장 단순한 형태의 청킹 방법입니다. 
텍스트를 **문자 단위**로 분할합니다. 
주로 **간단한 텍스트 처리**에 사용되며, 생성형 인공지능(Generative AI)에서 텍스트를 처리할 때 자주 사용됩니다.

#### 2. RecursiveCharacterTextSplitter
텍스트를 **재귀적으로 분할**하는 방식입니다. 
문서 구조를 분석하여 **문단, 문장** 등 자연스러운 단위로 청크를 나눈 후, 필요에 따라 문자 단위로도 분할합니다. 
예를 들어, **두 줄 띄어쓰기**로 구분된 부분을 먼저 나누고, **한 줄 띄어쓰기** 부분을 나누고 **문장을 청크로 분리**하고 마지막으로 **Character로 분리**하기 때문에 더 세밀하게 chunking이 됩니다

#### 3. TokenTextSplitter
이 방식은 **토큰 수**를 기준으로 텍스트를 분할합니다. LLM은 일반적으로 **토큰 단위**로 컨텍스트 창이 정해져 있기 때문에, 토큰을 기준으로 나누는 것은 모델의 처리에 유용할 수 있습니다. 토큰은 일반적으로 **최대 4자로 구성**됩니다.

---

### 청킹 시 고려사항

#### 1. 문맥 손실
청크로 나누는 과정에서 문맥이 손실될 수 있습니다. 이를 방지하기 위해 **문장이나 문단** 같은 자연스러운 단위로 나누는 것이 중요합니다.

#### 2. 청크 경계 처리
청크 경계를 설정할 때 문장이 중간에 잘리지 않도록 해야 합니다. **자연스러운 언어 단위**에 맞춰 청크를 나누고, **청크 간의 일부 중복**을 허용함으로써 문맥을 보존할 수 있습니다.

---

### 청킹 고려사항

#### 1. 적절한 Chunk Size와 Chunk Overlap 설정
텍스트에 맞는 적절한 **청크 사이즈**와 **오버랩 값**을 설정하는 것이 중요합니다. 청크가 너무 작으면 문맥을 잃을 수 있고, 너무 크면 모델이 처리하기 어려워질 수 있습니다.

#### 2. 적절한 청킹 방법 선택
텍스트의 특성과 서비스에 맞는 **청킹 방법**을 선택해야 합니다. 상황에 따라 **CharacterTextSplitter**, **RecursiveCharacterTextSplitter**, **TokenTextSplitter** 등의 방법을 선택하여 효율적으로 텍스트를 분할할 수 있습니다.

---

### 결론

**청킹(Chunking)**은 대형 언어 모델에서 긴 텍스트를 더 작은 단위로 나누어 처리 시간을 단축하고 모델의 효율성을 높이는 중요한 기술입니다. 이를 통해 입력 데이터의 크기 제한 문제를 해결하고, 자연스러운 문맥을 유지하면서 효과적으로 텍스트를 처리할 수 있습니다. 텍스트의 성격과 목표에 맞는 적절한 **청크 사이즈**, **오버랩** 설정 및 **청킹 방법**을 선택하는 것이 중요합니다.

--- 

이 블로그 게시글을 통해 **청킹(Chunking)**의 개념과 필요성, 그리고 다양한 청킹 방법을 이해할 수 있었기를 바랍니다. 청킹은 데이터 처리의 효율성을 높이는 데 매우 중요한 기술이므로, 프로젝트에 맞는 최적의 청킹 방식을 찾아 적용해 보세요!

---

이 글을 통해 청킹에 대해 더 궁금한 점이 있거나 구체적인 질문이 있다면 언제든지 댓글로 남겨주세요!

**RAG**(**Retrieval**-**Augmented** **Generation**)는 검색을 통해 데이터를 찾아 모델에 전달하여 더욱 정확한 답변을 생성하는 기술입니다. 
RAG에서 사용되는 다양한 **검색 유형**과 **검색 알고리즘**을 이해하면, 더 나은 검색 경험을 제공하고 모델의 응답 정확성을 높일 수 있습니다. 
이 글에서는 RAG에서 사용되는 주요 검색 방법과 알고리즘을 정리하였습니다.

### 1. 검색 유형

#### 1-1. 키워드 검색
**키워드 검색**은 사용자가 입력한 **하나 이상의 키워드**를 기준으로 정보를 찾아내는 방식입니다. **정확한 키워드 매칭**을 통해 관련된 문서를 반환하며, 전통적인 검색 방식에서 많이 사용됩니다.

- 예시: "기후 변화"라는 키워드를 검색하면, 해당 키워드와 일치하는 문서를 반환합니다.

#### 1-2. 시맨틱 검색 (Semantic Search)
**시맨틱 검색**은 사용자가 입력한 질문이나 검색어의 **의미를 이해**하려고 시도하는 검색 방식입니다. 즉, 단순히 키워드를 매칭하는 것이 아니라, 사용자의 **의도와 의미**를 파악하여 더 관련성 높은 정보를 제공합니다.

- 예시: "영화 추천"이라는 검색어를 입력하면, 사용자의 의도를 파악해 **새로운 영화 추천**을 제공합니다.
  
**사용 사례**:  
- 웹 검색 엔진
- 전자 상거래 플랫폼 (Amazon, eBay)
- 기업 내부 데이터 검색

#### 1-3. 벡터 검색 (Vector Search)
**벡터 검색**은 데이터를 **고차원 벡터 공간**으로 변환한 뒤, 그 **벡터 간의 유사도**를 기반으로 검색을 수행합니다. 이를 통해 단순히 텍스트 상의 매칭이 아닌, 벡터 간의 **유사성**을 통해 관련된 데이터를 찾아냅니다.

**동작 원리**:
1. 데이터를 벡터로 변환
2. 벡터 간의 유사도를 계산 (코사인 유사도, 유클리드 거리 등)
3. 유사 항목을 검색 (Faiss, Elasticsearch 등 사용)


#### 1-4. 시맨틱 검색 & 벡터 검색의 비교
| 구분            | 시맨틱 검색                              | 벡터 검색                               |
|-----------------|----------------------------------------|----------------------------------------|
| 작동 원리       | 쿼리의 의미와 문맥을 파악하여 결과 제공  | 쿼리와 데이터를 벡터로 변환 후 유사도 계산 |
| 데이터 처리     | 자연어 데이터 중심                      | 텍스트, 이미지, 비디오 등 다양한 데이터   |
| 주요 장점       | 사용자의 의도와 문맥 이해                | 의미적 유사성 기반 검색                |
| 주요 단점       | 구현과 최적화가 복잡함                  | 벡터로의 전처리 및 계산 비용 발생       |
| 적용 분야       | 웹 검색 엔진, 질의응답 시스템             | 추천 시스템, 이미지/비디오 검색         |

#### 1-5. 하이브리드 검색
**하이브리드 검색**은 **키워드 검색**, **시맨틱 검색**, **벡터 검색**을 혼합한 방식으로, 각 방식의 장점을 결합하여 **더 정확한 검색 결과**를 제공합니다.

---

### 2. 검색 알고리즘

#### 2-1. 유사도 검색 (Similarity Search)
**유사도 검색**은 주어진 쿼리 또는 데이터 항목에 대해 **가장 유사한 항목을 검색**하는 과정입니다. 이 검색은 고차원 벡터 공간에서 이루어지며, **코사인 유사도**, **유클리드 거리** 등 다양한 **유사도 측정 방법**을 사용합니다.

#### 2-2. 유클리드 거리 (Euclidean Distance)
**유클리드 거리**는 **두 점 사이의 직선 거리**를 측정하는 방법으로, 가장 직관적이고 일반적인 거리 측정 방식입니다. 주로 **벡터 간의 차이**를 계산할 때 사용됩니다.

수식:
\[
\text{Euclidean Distance} = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}
\]

#### 2-3. 코사인 유사도 (Cosine Similarity)
**코사인 유사도**는 두 벡터의 **방향**을 기반으로 유사도를 측정합니다. 벡터가 **같은 방향**이면 1에 가까워지고, **반대 방향**이면 -1에 가까워집니다. 주로 텍스트 데이터의 **유사성**을 측정하는 데 사용됩니다.

수식:
\[
\text{Cosine Similarity} = \frac{A \cdot B}{|A| |B|}
\]

#### 2-4. 맨해튼 거리 (Manhattan Distance)
**맨해튼 거리**는 두 점 사이의 **수직 및 수평 경로**를 따라 이동하는 거리를 측정합니다. 주로 **격자형 데이터**에서 사용되며, 실제 직선 거리가 아닌, **수평과 수직으로만 이동**할 수 있을 때의 최단 거리를 의미합니다.

#### 2-5. 자카드 유사도 (Jaccard Similarity)
**자카드 유사도**는 두 집합 간의 **공통 원소 비율**을 측정하는 방법입니다. 두 집합이 얼마나 겹치는지를 비율로 계산하여, 그 유사도를 나타냅니다.

수식:
\[
\text{Jaccard Similarity} = \frac{A \cap B}{A \cup B}
\]

---

### 결론

**RAG**에서 사용하는 검색 방법은 **키워드 검색**, **시맨틱 검색**, **벡터 검색** 등 여러 유형이 있으며, 각 검색 방법은 검색 엔진의 목적과 성능에 따라 다르게 활용됩니다. 또한, **유사도 검색**을 포함한 다양한 **검색 알고리즘**을 통해 데이터를 보다 효율적으로 검색할 수 있습니다. 적절한 검색 방법을 선택하면, RAG 시스템에서 더욱 정확하고 관련성 높은 데이터를 제공받을 수 있습니다.


